# CardGame.Web

## Purpose of the Project

This project is the main entry point and host for the Love Letter card game application. It's an ASP.NET Core project responsible for:
1.  Hosting the web server.
2.  Exposing API endpoints for the Angular frontend (`ClientApp`) and potentially other clients.
3.  Serving the Angular single-page application.
4.  Handling web-specific concerns such as HTTP request/response pipeline, authentication, authorization, routing, and middleware configuration.

## Code Guidelines

### What Should Be in This Project:
*   **API Controllers**: ASP.NET Core controllers that define HTTP endpoints (e.g., `/api/game`, `/api/deck`). These controllers typically receive requests, delegate to services in `CardGame.Application` (often via MediatR), and return responses.
*   **`Program.cs` (or `Startup.cs` in older .NET Core versions)**: Configures services for dependency injection, sets up the HTTP request pipeline (middleware), and initializes the application.
*   **Static File Serving**: Configuration for serving the built Angular application from the `ClientApp/dist` folder.
*   **Authentication and Authorization**: Setup and configuration for security mechanisms (e.g., ASP.NET Core Identity, JWT).
*   **Middleware**: Custom or built-in middleware for handling requests, logging, error handling, etc.
*   **View Models (if using MVC views, though primarily API-focused here)**: Models specific to views, distinct from Application DTOs.
*   **`appsettings.json`**: Configuration files for different environments.

### What Should NOT Be in This Project:
*   **Core Business Logic**: This resides in `CardGame.Domain`.
*   **Application Orchestration Logic**: This is handled by `CardGame.Application`. Controllers should be thin and delegate.
*   **Direct Data Access or Infrastructure Implementation**: These belong in `CardGame.Infrastructure`.
*   **Frontend UI Code**: The Angular application code is located in the `ClientApp` subfolder.

## Development Environment Setup

*   **.NET SDK**: Ensure you have the .NET SDK installed (version compatible with the project, e.g., .NET 6.0 or .NET 7.0).
*   **IDE**: Visual Studio (recommended for its integrated tooling for ASP.NET Core and Angular) or Visual Studio Code with C# and JavaScript/TypeScript extensions.
*   **Node.js and npm**: Required for the Angular `ClientApp`. Install Node.js (which includes npm) from [nodejs.org](https://nodejs.org/).
*   **Angular CLI**: Install globally if you haven't already:
    ```bash
    npm install -g @angular/cli
    ```
*   **Running the Backend Server**:
    *   Navigate to the `CardGame.Web` project directory in your terminal.
    *   Run the application:
        ```bash
        dotnet run
        ```
        Or, if using Visual Studio, you can start debugging (F5).
    *   The backend API will typically be available at `https://localhost:7XXX` or `http://localhost:5XXX` (check console output for the exact ports).
*   **Configuration**:
    *   Check `appsettings.Development.json` for local development settings (e.g., connection strings if a database is used, logging levels).
    *   The `ClientApp` relies on `proxy.conf.js` to forward API requests from the Angular development server (usually on port 4200) to this backend server.

## Tips for AI Assistants

*   **Entry Point**: `Program.cs` is the primary entry point for the backend application. It's crucial for understanding service registration and the middleware pipeline.
*   **API Controllers**: Found in the `Controllers/` directory. These define the HTTP API surface. They often use MediatR to send commands/queries to the `CardGame.Application` layer.
*   **Thin Controllers**: Controllers should be lean, primarily responsible for request/response handling and delegating business operations.
*   **Serving ClientApp**: This project is configured to serve the static files generated by building the Angular application in `ClientApp`. During development, the Angular CLI's dev server is typically used for the frontend, proxying API calls.
*   **Dependencies**: This project depends on `CardGame.Application` and `CardGame.Infrastructure` to access application services and register infrastructure components.
*   **JSON Serialization**: Pay attention to JSON serialization settings (e.g., camelCase vs PascalCase, enum handling) in `Program.cs` as they affect API communication with the frontend. (Memory: `71706355-0396-49dd-9882-4aa2cdf11a55`)
*   **Controller Discovery**: If controllers are in other assemblies (like `CardGame.Application`), ensure `AddApplicationPart` is used. (Memory: `0727d625-5429-4ce6-b2c7-1ee4af7f24bc`)
